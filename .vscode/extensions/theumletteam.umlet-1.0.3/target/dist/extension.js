module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e){t.exports=require("vscode")},function(t,e,n){"use strict";const i=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+i+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+r+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e){const i=Object.keys(e),r=i.length;for(let o=0;o<r;o++)t[i[o]]="strict"===n?[e[i[o]]]:e[i[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,n){var i={};if(!t)return e;for(let r=0;r<n.length;r++)void 0!==t[n[r]]?i[n[r]]=t[n[r]]:i[n[r]]=e[n[r]];return i},e.isName=function(t){const e=o.exec(t);return!(null==e)},e.getAllMatches=function(t,e){const n=[];let i=e.exec(t);for(;i;){const r=[],o=i.length;for(let t=0;t<o;t++)r.push(i[t]);n.push(r),i=e.exec(t)}return n},e.nameRegexp=r},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e,n){"use strict";const i=n(1),r=n(1).buildOptions,o=n(7);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=s;const a=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function l(t,e,n){return e&&(n.trimValues&&(e=e.trim()),e=c(e=n.tagValueProcessor(e,t),n.parseNodeValue,n.parseTrueNumberOnly)),e}function u(t,e){if(e.ignoreNameSpace){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}function c(t,e,n){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?e=Number.parseInt(t,16):-1!==t.indexOf(".")?(e=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):e=Number.parseInt(t,10),n&&(e=String(e)===t?e:t)),e}return i.isExist(t)?t:""}e.props=a;const d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function g(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const n=i.getAllMatches(t,d),r=n.length,o={};for(let t=0;t<r;t++){const i=u(n[t][1],e);i.length&&(void 0!==n[t][4]?(e.trimValues&&(n[t][4]=n[t][4].trim()),n[t][4]=e.attrValueProcessor(n[t][4],i),o[e.attributeNamePrefix+i]=c(n[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+i]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=o,t}return o}}function h(t,e){let n,i="";for(let r=e;r<t.length;r++){let e=t[r];if(n)e===n&&(n="");else if('"'===e||"'"===e)n=e;else{if(">"===e)return{data:i,index:r};"\t"===e&&(e=" ")}i+=e}}function p(t,e,n,i){const r=t.indexOf(e,n);if(-1===r)throw new Error(i);return r+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/(\r\n)|\n/," "),e=r(e,s,a);const n=new o("!xml");let u=n,c="";for(let n=0;n<t.length;n++){if("<"===t[n])if("/"===t[n+1]){const r=p(t,">",n,"Closing Tag is not closed.");let o=t.substring(n+2,r).trim();if(e.ignoreNameSpace){const t=o.indexOf(":");-1!==t&&(o=o.substr(t+1))}u&&(u.val?u.val=i.getValue(u.val)+""+l(o,c,e):u.val=l(o,c,e)),e.stopNodes.length&&e.stopNodes.includes(u.tagname)&&(u.child=[],null==u.attrsMap&&(u.attrsMap={}),u.val=t.substr(u.startIndex+1,n-u.startIndex-1)),u=u.parent,c="",n=r}else if("?"===t[n+1])n=p(t,"?>",n,"Pi Tag is not closed.");else if("!--"===t.substr(n+1,3))n=p(t,"--\x3e",n,"Comment is not closed.");else if("!D"===t.substr(n+1,2)){const e=p(t,">",n,"DOCTYPE is not closed.");n=t.substring(n,e).indexOf("[")>=0?t.indexOf("]>",n)+1:e}else if("!["===t.substr(n+1,2)){const r=p(t,"]]>",n,"CDATA is not closed.")-2,s=t.substring(n+9,r);if(c&&(u.val=i.getValue(u.val)+""+l(u.tagname,c,e),c=""),e.cdataTagName){const t=new o(e.cdataTagName,u,s);u.addChild(t),u.val=i.getValue(u.val)+e.cdataPositionChar,s&&(t.val=s)}else u.val=(u.val||"")+(s||"");n=r+2}else{const r=h(t,n+1);let s=r.data;const a=r.index,d=s.indexOf(" ");let p=s;if(-1!==d&&(p=s.substr(0,d).trimRight(),s=s.substr(d+1)),e.ignoreNameSpace){const t=p.indexOf(":");-1!==t&&(p=p.substr(t+1))}if(u&&c&&"!xml"!==u.tagname&&(u.val=i.getValue(u.val)+""+l(u.tagname,c,e)),s.length>0&&s.lastIndexOf("/")===s.length-1){"/"===p[p.length-1]?(p=p.substr(0,p.length-1),s=p):s=s.substr(0,s.length-1);const t=new o(p,u,"");p!==s&&(t.attrsMap=g(s,e)),u.addChild(t)}else{const t=new o(p,u);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=a),p!==s&&(t.attrsMap=g(s,e)),u.addChild(t),u=t}c="",n=a}else c+=t[n]}return n}},function(t,e,n){"use strict";const i=n(6),r=n(4),o=n(4),s=n(1).buildOptions,a=n(8);e.parse=function(t,e,n){if(n){!0===n&&(n={});const e=a.validate(t,n);if(!0!==e)throw Error(e.err.msg)}e=s(e,o.defaultOptions,o.props);const l=r.getTraversalObj(t,e);return i.convertToJson(l,e)},e.convertTonimn=n(9).convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=i.convertToJson,e.convertToJsonString=n(10).convertToJsonString,e.validate=a.validate,e.j2xParser=n(11),e.parseToNimn=function(t,n,i){return e.convertTonimn(e.getTraversalObj(t,i),n,i)}},function(t,e,n){"use strict";const i=n(1),r=function(t,e){const n={};if(!(t.child&&!i.isEmptyObject(t.child)||t.attrsMap&&!i.isEmptyObject(t.attrsMap)))return i.isExist(t.val)?t.val:"";i.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&("strict"===e.arrayMode?n[e.textNodeName]=[t.val]:n[e.textNodeName]=t.val),i.merge(n,t.attrsMap,e.arrayMode);const o=Object.keys(t.child);for(let i=0;i<o.length;i++){var s=o[i];if(t.child[s]&&t.child[s].length>1)for(var a in n[s]=[],t.child[s])n[s].push(r(t.child[s][a],e));else if(!0===e.arrayMode){const i=r(t.child[s][0],e);n[s]="object"==typeof i?[i]:i}else"strict"===e.arrayMode?n[s]=[r(t.child[s][0],e)]:n[s]=r(t.child[s][0],e)}return n};e.convertToJson=r},function(t,e,n){"use strict";t.exports=function(t,e,n){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=n,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},function(t,e,n){"use strict";const i=n(1),r={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(t,e){for(var n=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var i=t.substr(n,e-n);if(e>5&&"xml"===i)return g("InvalidXml","XML declaration allowed only at the start of the document.",p(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=i.buildOptions(e,r,o);const n=[];let u=!1,h=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let r=0;r<t.length;r++){if("<"!==t[r]){if(" "===t[r]||"\t"===t[r]||"\n"===t[r]||"\r"===t[r])continue;return g("InvalidChar","char '"+t[r]+"' is not expected.",p(t,r))}if(r++,"?"===t[r]){if(r=s(t,++r),r.err)return r}else{if("!"===t[r]){r=a(t,r);continue}{let o=!1;"/"===t[r]&&(o=!0,r++);let s="";for(;r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r]&&"\n"!==t[r]&&"\r"!==t[r];r++)s+=t[r];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),r--),f=s,!i.isName(f)){let e;return e=0===s.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+s+"' is an invalid name.",g("InvalidTag",e,p(t,r))}const m=l(t,r);if(!1===m)return g("InvalidAttr","Attributes for '"+s+"' have open quote.",p(t,r));let v=m.value;if(r=m.index,"/"===v[v.length-1]){v=v.substring(0,v.length-1);const n=c(v,e);if(!0!==n)return g(n.err.code,n.err.msg,p(t,r-v.length+n.err.line));u=!0}else if(o){if(!m.tagClosed)return g("InvalidTag","Closing tag '"+s+"' doesn't have proper closing.",p(t,r));if(v.trim().length>0)return g("InvalidTag","Closing tag '"+s+"' can't have attributes or invalid starting.",p(t,r));{const e=n.pop();if(s!==e)return g("InvalidTag","Closing tag '"+e+"' is expected inplace of '"+s+"'.",p(t,r));0==n.length&&(h=!0)}}else{const i=c(v,e);if(!0!==i)return g(i.err.code,i.err.msg,p(t,r-v.length+i.err.line));if(!0===h)return g("InvalidXml","Multiple possible root nodes found.",p(t,r));n.push(s),u=!0}for(r++;r<t.length;r++){if("<"===t[r]){if("!"===t[r+1]){r++,r=a(t,r);continue}break}if("&"===t[r]){const e=d(t,r);if(-1==e)return g("InvalidChar","char '&' is not expected.",p(t,r));r=e}}"<"===t[r]&&r--}}}var f;return u?!(n.length>0)||g("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):g("InvalidXml","Start tag expected.",1)};function l(t,e){let n="",i="",r=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===i)i=t[e];else{if(i!==t[e])continue;i=""}else if(">"===t[e]&&""===i){r=!0;break}n+=t[e]}return""===i&&{value:n,index:e,tagClosed:r}}const u=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function c(t,e){const n=i.getAllMatches(t,u),r={};for(let i=0;i<n.length;i++){if(0===n[i][1].length)return g("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",f(t,n[i][0]));if(void 0===n[i][3]&&!e.allowBooleanAttributes)return g("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",f(t,n[i][0]));const o=n[i][2];if(!h(o))return g("InvalidAttr","Attribute '"+o+"' is an invalid name.",f(t,n[i][0]));if(r.hasOwnProperty(o))return g("InvalidAttr","Attribute '"+o+"' is repeated.",f(t,n[i][0]));r[o]=1}return!0}function d(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function g(t,e,n){return{err:{code:t,msg:e,line:n}}}function h(t){return i.isName(t)}function p(t,e){return t.substring(0,e).split(/\r?\n/).length}function f(t,e){return t.indexOf(e)+e.length}},function(t,e,n){"use strict";const i=function(t){return String.fromCharCode(t)},r={nilChar:i(176),missingChar:i(201),nilPremitive:i(175),missingPremitive:i(200),emptyChar:i(178),emptyValue:i(177),boundryChar:i(179),objStart:i(198),arrStart:i(204),arrayEnd:i(185)},o=[r.nilChar,r.nilPremitive,r.missingChar,r.missingPremitive,r.boundryChar,r.emptyChar,r.emptyValue,r.arrayEnd,r.objStart,r.arrStart],s=function(t,e,n){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?a(t[0].val,e):a(t,e);{const o=void 0===(i=t)?r.missingChar:null===i?r.nilChar:!(i.child&&0===Object.keys(i.child).length&&(!i.attrsMap||0===Object.keys(i.attrsMap).length))||r.emptyChar;if(!0===o){let i="";if(Array.isArray(e)){i+=r.arrStart;const o=e[0],u=t.length;if("string"==typeof o)for(let e=0;e<u;e++){const n=a(t[e].val,o);i=l(i,n)}else for(let e=0;e<u;e++){const r=s(t[e],o,n);i=l(i,r)}i+=r.arrayEnd}else{i+=r.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let r in o){const a=o[r];let u;u=!n.ignoreAttributes&&t.attrsMap&&t.attrsMap[a]?s(t.attrsMap[a],e[a],n):a===n.textNodeName?s(t.val,e[a],n):s(t.child[a],e[a],n),i=l(i,u)}}return i}return o}var i},a=function(t){switch(t){case void 0:return r.missingPremitive;case null:return r.nilPremitive;case"":return r.emptyValue;default:return t}},l=function(t,e){return u(e[0])||u(t[t.length-1])||(t+=r.boundryChar),t+e},u=function(t){return-1!==o.indexOf(t)};const c=n(4),d=n(1).buildOptions;e.convert2nimn=function(t,e,n){return n=d(n,c.defaultOptions,c.props),s(t,e,n)}},function(t,e,n){"use strict";const i=n(1),r=n(1).buildOptions,o=n(4),s=function(t,e,n){let r="{";const o=Object.keys(t.child);for(let n=0;n<o.length;n++){var a=o[n];if(t.child[a]&&t.child[a].length>1){for(var l in r+='"'+a+'" : [ ',t.child[a])r+=s(t.child[a][l],e)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+a+'" : '+s(t.child[a][0],e)+" ,"}return i.merge(r,t.attrsMap),i.isEmptyObject(r)?i.isExist(t.val)?t.val:"":(i.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(r+='"'+e.textNodeName+'" : '+(!0!==(u=t.val)&&!1!==u&&isNaN(u)?'"'+u+'"':u)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}");var u};e.convertToJsonString=function(t,e){return(e=r(e,o.defaultOptions,o.props)).indentBy=e.indentBy||"",s(t,e,0)}},function(t,e,n){"use strict";const i=n(1).buildOptions,r={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function s(t){this.options=i(t,r,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.options.cdataTagName?this.isCDATA=f:this.isCDATA=function(){return!1},this.replaceCDATAstr=a,this.replaceCDATAarr=l,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=g,this.buildObjNode=c):(this.buildTextNode=d,this.buildObjNode=u),this.buildTextValNode=d,this.buildObjectNode=u}function a(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function l(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[n]+"]]>");return t+this.newLine}function u(t,e,n,i){return n&&!t.includes("<")?this.indentate(i)+"<"+e+n+">"+t+"</"+e+this.tagEndChar:this.indentate(i)+"<"+e+n+this.tagEndChar+t+this.indentate(i)+"</"+e+this.tagEndChar}function c(t,e,n,i){return""!==t?this.buildObjectNode(t,e,n,i):this.indentate(i)+"<"+e+n+"/"+this.tagEndChar}function d(t,e,n,i){return this.indentate(i)+"<"+e+n+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function g(t,e,n,i){return""!==t?this.buildTextValNode(t,e,n,i):this.indentate(i)+"<"+e+n+"/"+this.tagEndChar}function h(t){return this.options.indentBy.repeat(t)}function p(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function f(t){return t===this.options.cdataTagName}s.prototype.parse=function(t){return this.j2x(t,0).val},s.prototype.j2x=function(t,e){let n="",i="";const r=Object.keys(t),o=r.length;for(let s=0;s<o;s++){const o=r[s];if(void 0===t[o]);else if(null===t[o])i+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)i+=this.buildTextNode(t[o],o,"",e);else if("object"!=typeof t[o]){const r=this.isAttribute(o);r?n+=" "+r+'="'+this.options.attrValueProcessor(""+t[o])+'"':this.isCDATA(o)?t[this.options.textNodeName]?i+=this.replaceCDATAstr(t[this.options.textNodeName],t[o]):i+=this.replaceCDATAstr("",t[o]):o===this.options.textNodeName?t[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+t[o])):i+=this.buildTextNode(t[o],o,"",e)}else if(Array.isArray(t[o]))if(this.isCDATA(o))i+=this.indentate(e),t[this.options.textNodeName]?i+=this.replaceCDATAarr(t[this.options.textNodeName],t[o]):i+=this.replaceCDATAarr("",t[o]);else{const n=t[o].length;for(let r=0;r<n;r++){const n=t[o][r];if(void 0===n);else if(null===n)i+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const t=this.j2x(n,e+1);i+=this.buildObjNode(t.val,o,t.attrStr,e)}else i+=this.buildTextNode(n,o,"",e)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const e=Object.keys(t[o]),i=e.length;for(let r=0;r<i;r++)n+=" "+e[r]+'="'+this.options.attrValueProcessor(""+t[o][e[r]])+'"'}else{const n=this.j2x(t[o],e+1);i+=this.buildObjNode(n.val,o,n.attrStr,e)}}return{attrStr:n,val:i}},t.exports=s},function(t,e,n){"use strict";n.r(e),n.d(e,"activate",(function(){return p}));var i,r=n(0),o=n(3),s=n(2),a=n(5);!function(t){t[t.STANDARD=0]="STANDARD",t[t.DETAILED=1]="DETAILED"}(i||(i={}));var l=null;let u=null;function c(){return console.log("current active text editor is: "+r.window.activeTextEditor),console.log("current active custom editor is: "+(null==u?void 0:u.active)),(null==u?void 0:u.active)?u:null}let d=null,g="";class h{constructor(t){this.context=t}resolveCustomTextEditor(t,e,n){const c=r.workspace.onDidChangeTextDocument(n=>{console.log("DOCCHANGE"+n.contentChanges.length),g===t.uri.toString()&&e===l?(console.log("last change came from the gwt application"+n.contentChanges.length),g=""):n.document.uri.toString()===t.uri.toString()&&0!==n.contentChanges.length&&(h.postLog(i.STANDARD,"match text change, injecting changes to gwt "),h.postLog(i.STANDARD,"webview panel is: "+e),e.webview.postMessage({command:"myUpdate",text:t.getText()}))});this.context.subscriptions.push(c),this.prepareActivePanel(e,t);const d=s.readFileSync(this.context.extensionPath+"/pom.xml").toString(),p=a.parse(d),f=p.project.artifactId+"-"+p.project.parent.version;function m(){u===e&&null===l?(u=null,h.postLog(i.DETAILED,"last active panel for "+t.fileName+" was reset because time and its still the last active panel")):h.postLog(i.DETAILED,"last active panel for "+t.fileName+" was NOT reset because there now is another last active panel anyway")}e.webview.options={enableScripts:!0,localResourceRoots:[r.Uri.file(o.join(this.context.extensionPath,"target",f))]},e.webview.onDidReceiveMessage(e=>{switch(e.command){case"exportUxf":return void this.saveFile(e.text);case"updateFiledataUxf":return void this.updateCurrentFile(e.text,t);case"exportPng":var n=e.text.replace("data:image/png;base64,","");return void this.saveFileDecode(n);case"postLog":return void h.postLog(i.STANDARD,e.text);case"setClipboard":return void r.env.clipboard.writeText(e.text);case"requestPasteClipboard":return void r.env.clipboard.readText().then(t=>{let e=t;h.postLog(i.DETAILED,"MESSAGE Paste, content is: "+e),null==l||l.webview.postMessage({command:"paste-response",text:e})})}},void 0,this.context.subscriptions),e.onDidChangeViewState(n=>{if(!n.webviewPanel.active)return h.postLog(i.DETAILED,"blur TT"),void(l===e?(l=null,h.postLog(i.DETAILED,"panel "+t.fileName+" blurred, 1.5 seconds until last panel is reset"),setTimeout(m,1500)):h.postLog(i.DETAILED,"timer for "+t.fileName+" was not set, there is another currently active panel"));this.prepareActivePanel(e,t)});const v=r.Uri.file(o.join(this.context.extensionPath,"target",f)),b=e.webview.asWebviewUri(v);let C=t.getText().toString();void 0===h.theme&&(h.theme="VS Code setting"),e.webview.html=this.getUmletWebviewPage(b.toString(),C.toString(),h.theme)}prepareActivePanel(t,e){h.postLog(i.DETAILED,"focus TT"),t.active?(h.postLog(i.DETAILED,"Webview "+e.fileName+" now focused because tt focus and is active"),l=t,d=t,h.postLog(i.DETAILED,"last current active panel set, "+e.fileName),u=t):h.postLog(i.DETAILED,"Webview "+e.fileName+" NOT FOCUSED because not active"),h.debugLevel=h.getConfiguration().get("debugLevel"),null==l||l.webview.postMessage({command:"debugLevel",text:h.debugLevel});let n=h.getConfiguration().get("theme");h.theme!==n&&(void 0===n&&(n="VS Code setting"),h.theme=n,null==l||l.webview.postMessage({command:"themeSetting",text:n}))}updateCurrentFile(t,e){g=e.uri.toString(),h.postLog(i.DETAILED,"lastChangeTriggeredByUri set to: "+g);const n=new r.WorkspaceEdit;return n.replace(e.uri,new r.Range(0,0,e.lineCount,0),t),r.workspace.applyEdit(n)}saveFile(t){r.window.showSaveDialog({filters:{"UML Diagram":["uxf"]}}).then(e=>{void 0!==e&&s.writeFile(e.fsPath,t,(function(t){if(t)return console.log(t)}))})}saveFileDecode(t){r.window.showSaveDialog({filters:{Image:["png"]}}).then(e=>{void 0!==e&&s.writeFile(e.fsPath,t,{encoding:"base64"},(function(t){if(t)return console.log(t)}))})}static postLog(t,e){null!=h.debugLevel?t.valueOf()<=h.debugLevel&&h.outputChannel.appendLine(e):0===t.valueOf()&&h.outputChannel.appendLine(e)}static getConfiguration(){return r.workspace.getConfiguration("umlet")}static overrideVsCodeCommands(t){h.postLog(i.STANDARD,"Overriding commands....");var e=r.commands.registerCommand("editor.action.clipboardCopyAction",(function n(o,s,a){h.postLog(i.DETAILED,"Copy registered"),e.dispose(),r.commands.executeCommand("editor.action.clipboardCopyAction").then((function(){var o;h.postLog(i.DETAILED,"After Copy"),null!==l?null==l||l.webview.postMessage({command:"copy"}):null!==c()&&(null===(o=c())||void 0===o||o.webview.postMessage({command:"copy"})),e=r.commands.registerCommand("editor.action.clipboardCopyAction",n),t.subscriptions.push(e)}))}));t.subscriptions.push(e);var n=r.commands.registerCommand("editor.action.clipboardPasteAction",(function e(o,s,a){h.postLog(i.DETAILED,"Paste registered"),n.dispose(),r.commands.executeCommand("editor.action.clipboardPasteAction").then((function(){h.postLog(i.DETAILED,"After Paste"),null!==l?r.env.clipboard.readText().then(t=>{let e=t;h.postLog(i.DETAILED,"MESSAGE Paste, content is:"+e),null==l||l.webview.postMessage({command:"paste",text:e})}):null!==c()&&r.env.clipboard.readText().then(t=>{var e;let n=t;h.postLog(i.DETAILED,"MESSAGE Paste, content is:"+n),null===(e=c())||void 0===e||e.webview.postMessage({command:"paste",text:n})}),n=r.commands.registerCommand("editor.action.clipboardPasteAction",e),t.subscriptions.push(n)}))}));t.subscriptions.push(n);var o=r.commands.registerCommand("editor.action.clipboardCutAction",(function e(n,s,a){h.postLog(i.DETAILED,"Cut registered"),o.dispose(),r.commands.executeCommand("editor.action.clipboardCutAction").then((function(){var n;h.postLog(i.DETAILED,"After Cut"),null!==l?(h.postLog(i.DETAILED,"MESSAGE Cut"),null==l||l.webview.postMessage({command:"cut"})):null!==c()&&(h.postLog(i.DETAILED,"MESSAGE Cut"),null===(n=c())||void 0===n||n.webview.postMessage({command:"cut"})),o=r.commands.registerCommand("editor.action.clipboardCutAction",e),t.subscriptions.push(o)}))}));t.subscriptions.push(o);var s=r.commands.registerCommand("editor.action.webvieweditor.selectAll",(function e(n,i,o){s.dispose(),l||r.commands.executeCommand("editor.action.webvieweditor.selectAll");s=r.commands.registerCommand("editor.action.webvieweditor.selectAll",e),t.subscriptions.push(s)}));t.subscriptions.push(s)}getUmletWebviewPage(t,e,n){return`<!DOCTYPE html>\n  <html>\n    <head>\n      <base href="${t}/" />\n      <meta name="viewport" content="user-scalable=no" />\n      <meta http-equiv="content-type" content="text/html; charset=UTF-8">\n      <link type="text/css" rel="stylesheet" href="umletino.css">\n      <link rel="icon" type="image/x-icon" href="favicon.ico">\n      <title>UMLetino - Free Online UML Tool for Fast UML Diagrams</title>\n      <script type="text/javascript" src="umletvscode/umletvscode.nocache.js?2020-03-15_09-48-08"><\/script>\n    </head>\n    <body>\n\n    <input type="text" id="copypaste" style="opacity: 0"/>\n      \x3c!-- the following line is necessary for history support --\x3e\n      <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>\n      \n      \x3c!-- the website will not work without JavaScript --\x3e\n      <noscript>\n        <div style="width: 25em; position: absolute; left: 50%; margin-left: -11em; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">\n          You must enable JavaScript to use this web application.\n      </div>\n      </noscript>\n      <div align="left" id="featurewarning" style="color: red; font-family: sans-serif; font-weight:bold; font-size:1.2em"></div>\n    </body>\n    <script>\n      var vscode = acquireVsCodeApi();\n      \n      var themeSetting = \`${n}\`;\n      \n      window.addEventListener('message', function (event) {\n          const message = event.data;\n          switch (message.command) {\n              case "themeSetting":\n                  themeSetting = message.text;\n                  switchTheme();\n                  break;\n          }\n       });\n\n      function getTheme() {\n        switch (themeSetting) {\n          case 'VS Code setting':\n            switch (document.body.className) {\n              case 'vscode-light':\n                return 'LIGHT'; \n              case 'vscode-dark':\n              case 'vscode-high-contrast':\n                return 'DARK';\n              default:\n                return 'LIGHT';\n            }\n          case 'Light theme':\n            return 'LIGHT';\n          case 'Dark theme':\n            return 'DARK';\n        }        \n      }\n\n      function getEditorBackgroundColor() {\n          switch (themeSetting) {\n              case 'VS Code setting':\n                return getComputedStyle(document.body).getPropertyValue('--vscode-editor-background');\n              case 'Light theme':\n                return '#FFFFFF';\n              case 'Dark theme':\n                return '#000000';\n            }\n      }\n\n      function switchBackgroundColor(color) {\n        document.body.style.backgroundColor = color;\n      }\n\n      // Observing theme changes\n      var observer = new MutationObserver(function(mutations) {\n        mutations.forEach(function(mutationRecord) {\n            switchTheme();\n        });    \n      });\n      \n      observer.observe(document.body, { attributes : true, attributeFilter : ['class'] });\n\n      // Retrieving current theme\n      var theme = getTheme();\n      \n      var backgroundColor = getEditorBackgroundColor();\n      switchBackgroundColor(backgroundColor);\n\n      var vsCodeInitialDiagramData = \`${encodeURIComponent(e)}\`;\n      \n      function switchTheme() {\n        var themeFromClass = getTheme();\n        backgroundColor = getEditorBackgroundColor();\n        if (window.changeTheme) {\n          window.changeTheme(themeFromClass, backgroundColor);\n        }\n        switchBackgroundColor(backgroundColor);\n      }\n\n      function notifyFocusVsCode() {\n        vscode.postMessage({\n          command: 'onFocus'\n        })\n      }\n\n      function notifyBlurVsCode() {\n        vscode.postMessage({\n          command: 'onBlur'\n        })\n      }\n      \n    <\/script>\n  </html>`}}function p(t){!function(t){t.subscriptions.push(r.commands.registerCommand("umlet.exportPng",()=>{null==d||d.webview.postMessage({command:"requestExport",text:r.workspace.getConfiguration("umlet").get("exportScale")})}));t.subscriptions.push(r.commands.registerCommand("umlet.createNewDiagram",()=>{let t=r.workspace.rootPath;if(void 0===t)return void r.window.showErrorMessage("Unable to create new .uxf file, since there is currently no folder/workspace opened. Please open a folder/workspace and try again!");let e="Diagram "+function(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear(),r=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return i+"-"+n+"-"+e+" "+r+"-"+o+"-"+s}()+".uxf",n=o.join(t,e);s.writeFile(n,"",(function(t){if(t)return console.log(t)}));let i=r.Uri.file(n);r.commands.executeCommand("vscode.open",i)}))}(t),console.log("activating umlet extension..."),h.overrideVsCodeCommands(t),t.subscriptions.push(r.window.registerCustomEditorProvider("uxfCustoms.umletEditor",new h(t),{webviewOptions:{retainContextWhenHidden:!0}}))}h.outputChannel=r.window.createOutputChannel("UMLet"),h.debugLevel=h.getConfiguration().get("debugLevel"),h.theme=h.getConfiguration().get("theme")}]);
//# sourceMappingURL=extension.js.map